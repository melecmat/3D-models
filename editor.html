<!DOCTYPE html>
<html lang="cs">

<head>
    <link rel="stylesheet" href="trumbowyg/dist/ui/trumbowyg.min.css">
    <link rel="stylesheet" href="trumbowyg/dist/plugins/colors/ui/trumbowyg.colors.min.css">
</head>

<body>
    
    <div id="editor"></div>
    

    <!-- Import jQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-3.3.1.min.js"><\/script>')</script>

    <!-- Import Trumbowyg -->
    <script src="trumbowyg/dist/trumbowyg.min.js"></script>

    <!-- Import Trumbowyg plugins... -->
    <script src="trumbowyg/dist/plugins/fontfamily/trumbowyg.fontfamily.min.js"></script>
    <script src="trumbowyg/dist/plugins/fontsize/trumbowyg.fontsize.min.js"></script>
    <script src="trumbowyg/dist/plugins/history/trumbowyg.history.min.js"></script>
    <script src="trumbowyg/dist/plugins/colors/trumbowyg.colors.min.js"></script>
    <script src="trumbowyg/dist/plugins/cleanpaste/trumbowyg.cleanpaste.min.js"></script>
    <script src="trumbowyg/dist/plugins/allowtagsfrompaste/trumbowyg.allowtagsfrompaste.min.js"></script>

    <script type="text/javascript">
        $('#editor').trumbowyg({
            btns: [
                ['viewHTML'],
                ['undo', 'redo'], // Only supported in Blink browsers
                ['formatting'],
                ['strong', 'em', 'del'],
                ['fontfamily'],
                ['fontsize'],
                ['foreColor', 'backColor'],
                ['superscript', 'subscript'],
                ['link'],
                ['insertImage'],
                ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
                ['unorderedList', 'orderedList'],
                ['horizontalRule'],
                ['removeformat'],
                ['fullscreen'],
            ],
            plugins: {
                allowTagsFromPaste: {
                    allowedTags: ['h1', 'h2', 'h3', 'h4', 'p', 'span', 'br', 'strong', 'em', 'del']
                }
            }
        });
    </script>
    
    <script type="text/javascript">
        function copy_html() {
            var htm = $('#editor').trumbowyg('html');
            htm = htm.replace(/\r?\n|\r/g, " ");
            // for copying text into clipboard
            const el = document.createElement('textarea');
            el.value = htm;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function append_html(html_to_append) {
            var html = $('#editor').trumbowyg('html');
            html += html_to_append;
            $('#editor').trumbowyg('html', html);
        }

        function paste_html() {
            navigator.clipboard.readText()
            .then(text => {
                append_html(text);
            })
            .catch(err => {
                console.error('Failed to read clipboard contents: ', err);
            });
        }
        
    </script>
    <button id="copy_html" onclick="copy_html()">Copy HTML</button>
    <button id="paste_html" onclick="paste_html()">Paste HTML</button>
    
</body>
</html>